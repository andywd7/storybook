import {
  Meta,
  Title,
  Subtitle,
  Story,
  Canvas,
  ArgsTable 
} from '@storybook/addon-docs/blocks'
import { Tile, Var } from "@dan-nz/storybook-documentation-primitives"
import themeDark from "../tokens/themes/theme.json"
import docTokens from "../tokens/docs"
import { SPACING_05, SPACING_08, WHITE, PURPLE_50 } from "../tokens/web/js/tokensAndPalette"

export const removePX = (str) => {
  return str.replace(new RegExp("px", "gi"), "")
}

export const rems = (px, base = 16) => {
  const value = (removePX(px) / base) + "rem"
  return value
}

export const tokensBorderRadius = Object.values(docTokens.borderRadius).map((t, i) => {
  return (
    <tr key={i}>
      <td><Var>{"$" + t.name}</Var></td>
      <td>{t.value}</td>
      <td><Tile value={removePX(SPACING_08)} color={PURPLE_50} square style={{ borderRadius: t.value }} /></td>
    </tr>
  )
})

export const tokensBoxShadow = Object.values(docTokens.boxShadow).map((t, i) => {
  return (
    <tr key={i}>
      <td><Var>{"$" + t.name}</Var></td>
      <td>{t.value}</td>
      <td><Tile value={removePX(SPACING_08)} color={WHITE} square style={{ boxShadow: t.value }} /></td>
    </tr>
  )
})

export const tokensSpace = Object.values(docTokens.spacing).map((t, i) => {
  return (
    <tr key={i}>
      <td><Var>{"$" + t.name}</Var></td>
      <td>{t.value}</td>
      <td>{rems(t.value)}</td>
      <td><Tile value={removePX(t.value)} color={PURPLE_50} square /></td>
    </tr>
  )
})

export const tokensTheme = Object.values(themeDark.theme).map((t, i) => {
  const styles = {
    backgroundColor: t.value,
    borderRadius: '40px',
    height: '40px',
    width: '40px'
  }
  return (
    <tr key={i}>
      <td><Var>{"$" + t.name}</Var></td>
      <td>{t.description}</td>
      <td width="200">
        <div className="token-value">
          <div>
            {t.valueName}
            <br/>
            -
            <br/>
            <Var>{t.value}</Var>
          </div>
          <div style={styles} />
        </div>
      </td>
    </tr>
  )
})

<Meta title='MATERIALS/Tokens' parameters={{ previewTabs: { canvas: { hidden: true } } }} />

<Title />

<Subtitle>Tokens subtitle</Subtitle>

<table className="table">
  <thead className="thead-dark">
    <tr>
        <th>Token</th>
        <th>px</th>
        <th>Example</th>
    </tr>
  </thead>
  <tbody>{tokensBorderRadius}</tbody>
</table>

<table className="table">
  <thead className="thead-dark">
    <tr>
        <th>Token</th>
        <th>px</th>
        <th>Example</th>
    </tr>
  </thead>
  <tbody>{tokensBoxShadow}</tbody>
</table>

<table className="table">
  <thead className="thead-dark">
    <tr>
        <th>Token</th>
        <th>px</th>
        <th>rem</th>
        <th>Example</th>
    </tr>
  </thead>
  <tbody>{tokensSpace}</tbody>
</table>

<table className="table">
  <thead className="thead-dark">
    <tr>
        <th width="120">Token</th>
        <th>Role</th>
        <th width="120">Value</th>
    </tr>
  </thead>
  <tbody>{tokensTheme}</tbody>
</table>
